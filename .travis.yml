language: python
python:
      - "3.6"
sudo: false

branches:
   only:
     - master

env:
  global:
    - TWINE_USERNAME=MKoesters
    # Note: TWINE_PASSWORD is set in Travis settings

matrix:
  include:
    - python: 3.4
      env: TOXENV=py34
    - python: 3.5
      env: TOXENV=py35
    - python: 3.6
      env: TOXENV=py36
    - python: 3.7
      env: TOXENV=py37
      dist: xenial
    - python: 3.6
      env: TOXENV=docu
    - python: 3.6
      env: TOXENV=coverage
    - python: 3.6
      env: TOXENV=example_scripts

# deploy:
#   provider: pypi
#   user: $PYPI_USER
#   password: $PYPI_PASSWORD
#   distributions: "sdist bdist_wheel bdist_egg"
#   on:
#     branch: master
#     tags: true


script:
  - tox
  - |
    if [[ $TRAVIS_TAG ]]; then
      python3 setup.py sdist
      python3 setup.py bdist_wheel --universal
      pip3 install twine
      twine upload --repository-url https://test.pypi.org/legacy/ dist/*
      twine upload dist/*
    fi
